<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>دوره‌های VIP من</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazir', sans-serif;
      background: linear-gradient(135deg, #eaf2ff, #ffffff);
      padding: 40px;
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      color: #004aad;
      margin-bottom: 40px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }

    .course-card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0, 72, 173, 0.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease;
    }

    .course-card:hover {
      transform: translateY(-5px);
    }

    .course-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .course-level {
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 10px;
    }

    .status {
      font-size: 0.9rem;
      margin-bottom: 15px;
      padding: 6px 12px;
      border-radius: 10px;
      display: inline-block;
    }

    .status.started {
      background-color: #d4fbe3;
      color: #27ae60;
      border: 1px solid #27ae60;
    }

    .status.pending {
      background-color: #fff6f0;
      color: #e67e22;
      border: 1px solid #e67e22;
    }

    .start-btn {
      padding: 10px 18px;
      background-color: #0077ff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s;
    }

    .start-btn:hover {
      background-color: #005fd3;
    }

    #errorBox {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #fff0f0;
      border: 2px dashed #e74c3c;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(255,0,0,0.2);
      max-width: 300px;
      animation: shake 0.4s;
      z-index: 1000;
    }

    #errorBox p {
      margin: 0;
      color: #c0392b;
      font-size: 15px;
      font-weight: bold;
    }

    #errorBox a {
      display: inline-block;
      margin-top: 10px;
      background-color: #e74c3c;
      color: white;
      padding: 8px 16px;
      border-radius: 10px;
      text-decoration: none;
      font-size: 14px;
    }

    @keyframes shake {
      0% { transform: translate(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
  </style>
</head>
<body>

<div class="grid" id="courseGrid">
  <!-- جاوااسکریپت دوره‌ها را اینجا وارد می‌کند -->
</div>

<div id="errorBox">
  <p>❌ شما هنوز ثبت‌نام نکرده‌اید!</p>
  <a href="register.html">رفتن به ثبت‌نام</a>
</div>

<script>
  const courses = [
    { title: 'مبانی برنامه‌نویسی', level: 'مبتدی' },
    { title: 'HTML و CSS مقدماتی', level: 'مبتدی' },
    { title: 'جاوااسکریپت کاربردی', level: 'متوسط' },
    { title: 'طراحی واکنش‌گرا', level: 'متوسط' },
    { title: 'هوش مصنوعی در وب', level: 'پیشرفته' },
    { title: 'Node.js پیشرفته', level: 'پیشرفته' },
  ];

  const startedCourses = JSON.parse(localStorage.getItem('startedCourses') || '[]');
  const isRegistered = localStorage.getItem('vipUser');

  const grid = document.getElementById('courseGrid');

  courses.forEach(course => {
    const card = document.createElement('div');
    card.className = 'course-card';

    const title = document.createElement('div');
    title.className = 'course-title';
    title.textContent = course.title;

    const level = document.createElement('div');
    level.className = 'course-level';
    level.textContent = `سطح: ${course.level}`;

    const status = document.createElement('div');
    status.className = 'status ' + (startedCourses.includes(course.title) ? 'started' : 'pending');
    status.textContent = startedCourses.includes(course.title) ? '✅ شروع‌شده' : '🕓 هنوز شروع نشده';

    const btn = document.createElement('button');
    btn.className = 'start-btn';
    btn.textContent = 'شروع';
    btn.onclick = () => handleStart(course.title, status);

    card.append(title, level, status, btn);
    grid.appendChild(card);
  });

  function handleStart(courseTitle, statusEl) {
    if (!isRegistered) {
      const errorBox = document.getElementById('errorBox');
      errorBox.style.display = 'block';
      errorBox.style.animation = 'shake 0.4s';
      setTimeout(() => {
        errorBox.style.animation = '';
      }, 400);
      return;
    }

    let list = JSON.parse(localStorage.getItem('startedCourses') || '[]');
    if (!list.includes(courseTitle)) {
      list.push(courseTitle);
      localStorage.setItem('startedCourses', JSON.stringify(list));
      statusEl.textContent = '✅ شروع‌شده';
      statusEl.className = 'status started';
      alert(`🎉 دوره «${courseTitle}» با موفقیت آغاز شد!`);
    } else {
      alert(`این دوره قبلاً شروع شده ✅`);
    }
  }
</script>

</body>
</html>
